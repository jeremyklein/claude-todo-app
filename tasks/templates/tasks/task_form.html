{% extends 'base.html' %}

{% block title %}{% if form.instance.pk %}Edit{% else %}New{% endif %} Task - Todo App{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{% if form.instance.pk %}Edit{% else %}Create New{% endif %} Task</h1>
</div>

<form method="post" class="task-form">
    {% csrf_token %}

    <div class="form-group">
        <label for="id_title">Title *</label>
        {{ form.title }}
        {% if form.title.errors %}
        <div class="error">{{ form.title.errors }}</div>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="id_description">Description</label>
        {{ form.description }}
        {% if form.description.errors %}
        <div class="error">{{ form.description.errors }}</div>
        {% endif %}
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="id_category">Category</label>
            {{ form.category }}
            {% if form.category.errors %}
            <div class="error">{{ form.category.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_status">Status *</label>
            {{ form.status }}
            {% if form.status.errors %}
            <div class="error">{{ form.status.errors }}</div>
            {% endif %}
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="id_priority">Priority *</label>
            {{ form.priority }}
            {% if form.priority.errors %}
            <div class="error">{{ form.priority.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_effort_points">Effort Points *</label>
            {{ form.effort_points }}
            {% if form.effort_points.errors %}
            <div class="error">{{ form.effort_points.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_due_date">Due Date</label>
            {{ form.due_date }}
            {% if form.due_date.errors %}
            <div class="error">{{ form.due_date.errors }}</div>
            {% endif %}
        </div>
    </div>

    <div class="form-group">
        <label for="id_tags">Tags</label>
        {{ form.tags }}
        <small>Comma-separated tags</small>
        {% if form.tags.errors %}
        <div class="error">{{ form.tags.errors }}</div>
        {% endif %}
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Save Task</button>
        <a href="{% url 'task_list' %}" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
